{"openapi":"3.0.0","info":{"title":"Fanta Optimizer API","version":"1.2.0","description":"API REST per ottimizzare una rosa Fantacalcio con budget per reparto, min % titolari, locks/excludes/prefer, giocatori già aggiudicati e redistribuzione proporzionale.","contact":{"name":"API Support","email":"support@example.com"}},"servers":[{"url":"http://localhost:3000","description":"Development server"}],"components":{"schemas":{"Role":{"type":"string","enum":["P","D","C","A"],"description":"Ruolo del giocatore: P=Portiere, D=Difensore, C=Centrocampista, A=Attaccante"},"Player":{"type":"object","properties":{"id":{"type":"string","description":"ID univoco del giocatore"},"name":{"type":"string","description":"Nome del giocatore"},"team":{"type":"string","description":"Squadra del giocatore"},"role":{"$ref":"#/components/schemas/Role"},"cost":{"type":"integer","minimum":0,"description":"Costo del giocatore"},"rating":{"type":"number","minimum":0,"maximum":100,"description":"Rating del giocatore"},"starter":{"type":"boolean","description":"Se il giocatore è titolare"}},"required":["id","name","team","role","cost","rating","starter"]},"Constraints":{"type":"object","properties":{"locks":{"type":"array","items":{"type":"string"},"description":"Lista di ID giocatori che devono essere inclusi nella rosa"},"excludes":{"type":"array","items":{"type":"string"},"description":"Lista di ID giocatori che devono essere esclusi dalla rosa"},"preferIds":{"type":"array","items":{"type":"string"},"description":"Lista di ID giocatori preferiti (bonus punti)"},"preferTeams":{"type":"array","items":{"type":"string"},"description":"Lista di squadre preferite (bonus punti)"},"preferBonus":{"type":"number","description":"Bonus punti per giocatori/squadre preferiti"}}},"BuildConfig":{"type":"object","properties":{"totalBudget":{"type":"integer","minimum":1,"description":"Budget totale disponibile"},"rolePercentages":{"type":"object","properties":{"P":{"type":"number","description":"Percentuale budget per portieri"},"D":{"type":"number","description":"Percentuale budget per difensori"},"C":{"type":"number","description":"Percentuale budget per centrocampisti"},"A":{"type":"number","description":"Percentuale budget per attaccanti"}},"description":"Percentuali di budget per ruolo (devono sommare a 100)"},"roleCounts":{"type":"object","properties":{"P":{"type":"integer","minimum":1,"description":"Numero di portieri richiesti"},"D":{"type":"integer","minimum":1,"description":"Numero di difensori richiesti"},"C":{"type":"integer","minimum":1,"description":"Numero di centrocampisti richiesti"},"A":{"type":"integer","minimum":1,"description":"Numero di attaccanti richiesti"}},"description":"Numero di giocatori richiesti per ruolo"},"minStarterPct":{"type":"number","minimum":0,"maximum":100,"description":"Percentuale minima di titolari richiesti per ruolo"},"starterBoost":{"type":"number","description":"Bonus punti per giocatori titolari"},"constraints":{"$ref":"#/components/schemas/Constraints"}},"required":["totalBudget","rolePercentages","roleCounts","minStarterPct"]},"Acquired":{"type":"object","properties":{"id":{"type":"string","description":"ID del giocatore già acquisito"},"price":{"type":"integer","minimum":0,"description":"Prezzo pagato per il giocatore"}},"required":["id","price"]},"RoleSolution":{"type":"object","properties":{"chosen":{"type":"array","items":{"$ref":"#/components/schemas/Player"},"description":"Giocatori selezionati per questo ruolo"},"totalCost":{"type":"number","description":"Costo totale per questo ruolo"},"totalScore":{"type":"number","description":"Punteggio totale per questo ruolo"},"startersCount":{"type":"integer","description":"Numero di titolari per questo ruolo"}}},"BuildResult":{"type":"object","properties":{"byRole":{"type":"object","properties":{"P":{"$ref":"#/components/schemas/RoleSolution"},"D":{"$ref":"#/components/schemas/RoleSolution"},"C":{"$ref":"#/components/schemas/RoleSolution"},"A":{"$ref":"#/components/schemas/RoleSolution"}}},"totalCost":{"type":"number","description":"Costo totale della rosa"},"totalScore":{"type":"number","description":"Punteggio totale della rosa"},"budgets":{"type":"object","properties":{"P":{"type":"number","description":"Budget allocato per portieri"},"D":{"type":"number","description":"Budget allocato per difensori"},"C":{"type":"number","description":"Budget allocato per centrocampisti"},"A":{"type":"number","description":"Budget allocato per attaccanti"}}},"initialBudgets":{"type":"object","properties":{"P":{"type":"number","description":"Budget iniziale per portieri"},"D":{"type":"number","description":"Budget iniziale per difensori"},"C":{"type":"number","description":"Budget iniziale per centrocampisti"},"A":{"type":"number","description":"Budget iniziale per attaccanti"}}}}}}},"paths":{"/health":{"get":{"summary":"Health check endpoint","description":"Verifica lo stato del servizio","tags":["System"],"responses":{"200":{"description":"Servizio funzionante","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"service":{"type":"string","example":"fanta-optimizer-ts"},"version":{"type":"string","example":"1.2.0"}}}}}}}}},"/optimize":{"post":{"summary":"Ottimizza la rosa Fantacalcio","description":"Calcola la migliore combinazione di giocatori rispettando budget, vincoli e preferenze","tags":["Optimization"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"players":{"type":"array","items":{"$ref":"#/components/schemas/Player"},"minItems":1,"description":"Lista di tutti i giocatori disponibili"},"config":{"$ref":"#/components/schemas/BuildConfig"},"acquired":{"type":"array","items":{"$ref":"#/components/schemas/Acquired"},"default":[],"description":"Lista di giocatori già acquisiti all'asta"}},"required":["players","config"]}}}},"responses":{"200":{"description":"Rosa ottimizzata calcolata con successo","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BuildResult"}}}},"400":{"description":"Richiesta non valida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Messaggio di errore"},"details":{"type":"array","description":"Dettagli di validazione (se disponibili)"}}}}}},"500":{"description":"Errore interno del server","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Internal Server Error"},"message":{"type":"string","description":"Dettagli dell'errore"}}}}}}}}}},"tags":[]}